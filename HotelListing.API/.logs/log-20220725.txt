2022-07-25 15:15:35.221 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:15:35.366 +02:00 [INF] Creating key {069d54a7-7234-42c4-afea-f175512668eb} with creation date 2022-07-25 13:15:35Z, activation date 2022-07-25 13:15:35Z, and expiration date 2022-10-23 13:15:35Z.
2022-07-25 15:15:35.378 +02:00 [INF] Writing data to file 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys\key-069d54a7-7234-42c4-afea-f175512668eb.xml'.
2022-07-25 15:15:35.579 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:15:35.580 +02:00 [INF] Hosting environment: Development
2022-07-25 15:15:35.580 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:15:35.619 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger - -
2022-07-25 15:15:35.784 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:15:35.826 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger - - - 301 - - 210.0639ms
2022-07-25 15:15:36.085 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 296.9437ms
2022-07-25 15:15:36.094 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/swagger-ui-bundle.js - -
2022-07-25 15:15:36.098 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/swagger-ui-standalone-preset.js - -
2022-07-25 15:15:36.101 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:15:36.105 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/swagger-ui.css - -
2022-07-25 15:15:36.117 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 15.3594ms
2022-07-25 15:15:36.154 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-07-25 15:15:36.154 +02:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-07-25 15:15:36.154 +02:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-07-25 15:15:36.160 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/swagger-ui.css - - - 200 143632 text/css 52.6879ms
2022-07-25 15:15:36.170 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 72.4362ms
2022-07-25 15:15:36.204 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 111.2682ms
2022-07-25 15:15:36.229 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:15:36.333 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 104.5021ms
2022-07-25 15:15:36.519 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:15:36.575 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "POST api/Account/register" for actions - HotelListing.API.Controllers.AccountController.Register (HotelListing.API),HotelListing.API.Controllers.AccountController.Login (HotelListing.API). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwagger(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-07-25 15:15:36.728 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 209.1112ms
2022-07-25 15:17:06.269 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:17:06.508 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:17:06.508 +02:00 [INF] Hosting environment: Development
2022-07-25 15:17:06.508 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:17:06.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:17:06.809 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:17:06.811 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 267.6266ms
2022-07-25 15:17:06.823 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 11.8960ms
2022-07-25 15:17:06.914 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:17:06.970 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 56.1590ms
2022-07-25 15:17:07.169 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:17:07.206 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "POST api/Account/register" for actions - HotelListing.API.Controllers.AccountController.Register (HotelListing.API),HotelListing.API.Controllers.AccountController.Login (HotelListing.API). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwagger(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-07-25 15:17:07.304 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 500 - text/plain;+charset=utf-8 134.6861ms
2022-07-25 15:18:37.983 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:18:38.232 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:18:38.232 +02:00 [INF] Hosting environment: Development
2022-07-25 15:18:38.232 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:18:38.269 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:18:38.586 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:18:38.587 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 319.9984ms
2022-07-25 15:18:38.602 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 11.4456ms
2022-07-25 15:18:38.682 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:18:38.725 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 42.7044ms
2022-07-25 15:18:38.844 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:18:38.999 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 155.7122ms
2022-07-25 15:19:21.470 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:19:21.700 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:19:21.701 +02:00 [INF] Hosting environment: Development
2022-07-25 15:19:21.701 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:19:21.730 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:19:21.971 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 243.2340ms
2022-07-25 15:19:21.974 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:19:21.988 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 12.1328ms
2022-07-25 15:19:22.086 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:19:22.142 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 56.3220ms
2022-07-25 15:19:22.269 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:19:22.426 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 157.7073ms
2022-07-25 15:19:36.561 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 57
2022-07-25 15:19:36.568 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:19:36.574 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:19:36.633 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:19:38.012 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:19:38.996 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 15:19:39.123 +02:00 [WRN] Invalid password for user.
2022-07-25 15:19:39.133 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-07-25 15:19:39.144 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 2506.1013ms
2022-07-25 15:19:39.145 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:19:39.150 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 57 - 401 - application/problem+json;+charset=utf-8 2589.1860ms
2022-07-25 15:21:27.672 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/register application/json 110
2022-07-25 15:21:27.674 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:21:27.683 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Register (HotelListing.API)'
2022-07-25 15:21:27.700 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Register(HotelListing.API.DTO.Users.ApiUserDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:21:27.799 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:21:27.818 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-07-25 15:21:27.863 +02:00 [WRN] User validation failed: DuplicateUserName.
2022-07-25 15:21:27.866 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.SerializableError'.
2022-07-25 15:21:27.868 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Register (HotelListing.API) in 167.9153ms
2022-07-25 15:21:27.869 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Register (HotelListing.API)'
2022-07-25 15:21:27.869 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/register application/json 110 - 400 - application/json;+charset=utf-8 197.3814ms
2022-07-25 15:21:48.697 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/register application/json 108
2022-07-25 15:21:48.698 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:21:48.698 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Register (HotelListing.API)'
2022-07-25 15:21:48.698 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Register(HotelListing.API.DTO.Users.ApiUserDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:21:48.725 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:21:48.730 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-07-25 15:21:48.880 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2022-07-25 15:21:48.911 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2022-07-25 15:21:48.945 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)
2022-07-25 15:21:48.951 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2022-07-25 15:21:48.966 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-07-25 15:21:48.984 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
2022-07-25 15:21:48.995 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p16='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p17='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [FirstName] = @p4, [LastName] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15
WHERE [Id] = @p16 AND [ConcurrencyStamp] = @p17;
SELECT @@ROWCOUNT;
2022-07-25 15:21:49.007 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-07-25 15:21:49.008 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Register (HotelListing.API) in 309.3079ms
2022-07-25 15:21:49.008 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Register (HotelListing.API)'
2022-07-25 15:21:49.009 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/register application/json 108 - 200 - - 311.9541ms
2022-07-25 15:22:30.902 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 59
2022-07-25 15:22:30.902 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:22:30.902 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:22:30.902 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:22:30.905 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:22:30.918 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 15:22:31.072 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 15:22:31.097 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 15:22:31.313 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-07-25 15:22:31.313 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 410.7034ms
2022-07-25 15:22:31.313 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:22:31.314 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 59 - 200 - - 412.2127ms
2022-07-25 15:23:12.114 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:23:12.369 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:23:12.369 +02:00 [INF] Hosting environment: Development
2022-07-25 15:23:12.369 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:23:12.390 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:23:12.653 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:23:12.655 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 265.7136ms
2022-07-25 15:23:12.674 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 13.3537ms
2022-07-25 15:23:12.757 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:23:12.810 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 53.5786ms
2022-07-25 15:23:12.931 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:23:13.068 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 136.9638ms
2022-07-25 15:23:38.964 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 59
2022-07-25 15:23:38.981 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:23:38.985 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:23:39.016 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:23:45.034 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:23:45.941 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 15:23:46.183 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 15:23:46.207 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 15:23:59.538 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-07-25 15:23:59.543 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 20522.6254ms
2022-07-25 15:23:59.544 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:23:59.551 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 59 - 200 - - 20586.3935ms
2022-07-25 15:26:05.529 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:26:05.757 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:26:05.757 +02:00 [INF] Hosting environment: Development
2022-07-25 15:26:05.758 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:26:05.784 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:26:06.036 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 255.4136ms
2022-07-25 15:26:06.037 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:26:06.057 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 15.1407ms
2022-07-25 15:26:06.166 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:26:06.236 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 69.7469ms
2022-07-25 15:26:06.364 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:26:06.500 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 135.2329ms
2022-07-25 15:26:33.691 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 59
2022-07-25 15:26:33.698 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:26:33.703 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:26:33.731 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:26:38.624 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:26:39.477 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 15:26:39.693 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 15:26:39.710 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 15:26:39.898 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 15:26:39.910 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 6173.8397ms
2022-07-25 15:26:39.911 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:26:39.917 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 59 - 200 - application/json;+charset=utf-8 6226.8383ms
2022-07-25 15:34:40.112 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:34:40.387 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:34:40.388 +02:00 [INF] Hosting environment: Development
2022-07-25 15:34:40.388 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:34:40.415 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:34:40.692 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:34:40.693 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 278.5479ms
2022-07-25 15:34:40.708 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 13.2011ms
2022-07-25 15:34:40.791 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:34:40.835 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 43.9676ms
2022-07-25 15:34:41.029 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:34:41.291 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 262.1656ms
2022-07-25 15:34:52.095 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58
2022-07-25 15:34:52.107 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:34:52.223 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:34:52.225 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58 - 401 - - 130.0738ms
2022-07-25 15:40:41.972 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:40:42.223 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:40:42.224 +02:00 [INF] Hosting environment: Development
2022-07-25 15:40:42.224 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:40:42.251 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:40:42.503 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:40:42.504 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 255.4327ms
2022-07-25 15:40:42.523 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 14.1796ms
2022-07-25 15:40:42.646 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:40:42.711 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 64.7655ms
2022-07-25 15:40:42.845 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:40:43.022 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 177.3078ms
2022-07-25 15:41:09.545 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 59
2022-07-25 15:41:09.560 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:41:09.564 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:41:09.592 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:41:13.050 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:41:13.928 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 15:41:14.136 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 15:41:14.155 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 15:41:14.359 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 15:41:14.371 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 4771.7275ms
2022-07-25 15:41:14.372 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:41:14.377 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 59 - 200 - application/json;+charset=utf-8 4831.9489ms
2022-07-25 15:41:35.072 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58
2022-07-25 15:41:35.080 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:41:35.187 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:41:35.195 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:41:35.197 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58 - 401 - - 124.5895ms
2022-07-25 15:42:22.453 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:42:22.688 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:42:22.688 +02:00 [INF] Hosting environment: Development
2022-07-25 15:42:22.688 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:42:22.716 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:42:22.968 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:42:22.969 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 254.6302ms
2022-07-25 15:42:22.986 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 13.9913ms
2022-07-25 15:42:23.085 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:42:23.143 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 58.0782ms
2022-07-25 15:42:23.258 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:42:23.390 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 132.0659ms
2022-07-25 15:42:25.427 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58
2022-07-25 15:42:25.727 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:42:25.768 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:42:25.777 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:42:25.786 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:42:25.788 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58 - 401 - - 360.5941ms
2022-07-25 15:43:44.378 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 59
2022-07-25 15:43:44.402 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:43:44.407 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:43:44.434 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:43:51.928 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:43:52.778 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 15:43:52.959 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 15:43:52.976 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 15:44:10.024 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 15:44:10.034 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 25594.6636ms
2022-07-25 15:44:10.035 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:44:10.039 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 59 - 200 - application/json;+charset=utf-8 25660.8518ms
2022-07-25 15:44:30.705 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58
2022-07-25 15:44:30.706 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:44:30.707 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:44:30.708 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:44:30.708 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:44:30.709 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58 - 401 - - 3.9191ms
2022-07-25 15:44:46.823 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58
2022-07-25 15:44:46.823 +02:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2022-07-25 15:44:46.824 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:44:46.825 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:44:46.825 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58 - 401 - - 2.5046ms
2022-07-25 15:47:23.153 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62
2022-07-25 15:47:23.155 +02:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2022-07-25 15:47:23.155 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:47:23.155 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:47:29.703 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:47:29.713 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 15:47:29.728 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 15:47:29.732 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 15:47:31.717 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 15:47:31.719 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 8563.5463ms
2022-07-25 15:47:31.719 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:47:31.720 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62 - 200 - application/json;+charset=utf-8 8566.6442ms
2022-07-25 15:49:40.344 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 47
2022-07-25 15:49:40.345 +02:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2022-07-25 15:49:40.346 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:49:40.346 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:49:40.347 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 47 - 401 - - 2.9837ms
2022-07-25 15:50:06.339 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 47
2022-07-25 15:50:06.340 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:50:06.341 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:50:06.341 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:50:06.341 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:50:06.344 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 47 - 401 - - 4.9998ms
2022-07-25 15:51:13.186 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:51:13.459 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:51:13.459 +02:00 [INF] Hosting environment: Development
2022-07-25 15:51:13.459 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:51:13.488 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:51:13.759 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:51:13.760 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 275.0496ms
2022-07-25 15:51:13.777 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 15.5317ms
2022-07-25 15:51:13.863 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:51:13.907 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 44.2418ms
2022-07-25 15:51:14.040 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:51:14.190 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 150.6778ms
2022-07-25 15:51:16.135 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 47
2022-07-25 15:51:16.413 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:51:16.453 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:51:16.458 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:51:16.465 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:51:16.466 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 47 - 401 - - 331.6325ms
2022-07-25 15:51:47.375 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 47
2022-07-25 15:51:47.387 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:51:47.388 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:51:47.388 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:51:47.388 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:51:47.389 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 47 - 401 - - 14.5510ms
2022-07-25 15:51:56.112 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:51:56.343 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:51:56.344 +02:00 [INF] Hosting environment: Development
2022-07-25 15:51:56.344 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:51:56.374 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:51:56.628 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:51:56.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 257.1945ms
2022-07-25 15:51:56.642 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 12.9265ms
2022-07-25 15:51:56.743 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:51:56.791 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 48.8310ms
2022-07-25 15:51:56.931 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:51:57.050 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.0286ms
2022-07-25 15:52:00.402 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 47
2022-07-25 15:52:00.739 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:52:00.779 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:52:00.788 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.CountriesController.PostCountry (HotelListing.API)'
2022-07-25 15:52:00.820 +02:00 [INF] Route matched with {action = "PostCountry", controller = "Countries"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HotelListing.API.Data.Country]] PostCountry(HotelListing.API.DTO.Countries.CreateCountryDto) on controller HotelListing.API.Controllers.CountriesController (HotelListing.API).
2022-07-25 15:52:02.154 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:52:03.576 +02:00 [INF] Executed DbCommand (129ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Countries] ([Name], [ShortName])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Countries]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-07-25 15:52:03.667 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelListing.API.Data.Country'.
2022-07-25 15:52:03.708 +02:00 [INF] Executed action HotelListing.API.Controllers.CountriesController.PostCountry (HotelListing.API) in 2881.2924ms
2022-07-25 15:52:03.709 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.CountriesController.PostCountry (HotelListing.API)'
2022-07-25 15:52:03.718 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 47 - 201 - application/json;+charset=utf-8 3316.6327ms
2022-07-25 15:52:26.703 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:52:26.933 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:52:26.933 +02:00 [INF] Hosting environment: Development
2022-07-25 15:52:26.933 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:52:26.971 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:52:27.246 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:52:27.247 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 279.6058ms
2022-07-25 15:52:27.260 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 10.8366ms
2022-07-25 15:52:27.341 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:52:27.392 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 50.8072ms
2022-07-25 15:52:27.530 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:52:27.693 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 163.3277ms
2022-07-25 15:52:39.078 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49
2022-07-25 15:52:39.377 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:52:39.424 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:52:39.429 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:52:39.435 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:52:39.437 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49 - 401 - - 359.1964ms
2022-07-25 15:53:15.746 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:53:15.997 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:53:15.997 +02:00 [INF] Hosting environment: Development
2022-07-25 15:53:15.998 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:53:16.037 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:53:16.301 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:53:16.301 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 264.7831ms
2022-07-25 15:53:16.319 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 14.1342ms
2022-07-25 15:53:16.410 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:53:16.458 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 47.6394ms
2022-07-25 15:53:16.591 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:53:16.718 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 126.8375ms
2022-07-25 15:54:00.563 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 60
2022-07-25 15:54:00.583 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:54:00.677 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:54:00.712 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:54:01.094 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-07-25 15:54:01.104 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 386.5654ms
2022-07-25 15:54:01.106 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:54:01.109 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 60 - 400 - application/problem+json;+charset=utf-8 546.9067ms
2022-07-25 15:54:19.017 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 61
2022-07-25 15:54:19.019 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:54:19.020 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:54:19.020 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:54:19.031 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-07-25 15:54:19.032 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 11.6042ms
2022-07-25 15:54:19.032 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:54:19.034 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 61 - 400 - application/problem+json;+charset=utf-8 16.8422ms
2022-07-25 15:54:35.545 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 61
2022-07-25 15:54:35.546 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:54:35.548 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:54:35.549 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:54:35.559 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-07-25 15:54:35.560 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 10.7729ms
2022-07-25 15:54:35.560 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:54:35.561 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 61 - 400 - application/problem+json;+charset=utf-8 15.9683ms
2022-07-25 15:54:50.167 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 60
2022-07-25 15:54:50.168 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:54:50.168 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:54:50.168 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:54:50.170 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-07-25 15:54:50.171 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 3.0098ms
2022-07-25 15:54:50.171 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:54:50.173 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 60 - 400 - application/problem+json;+charset=utf-8 6.0139ms
2022-07-25 15:55:23.616 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 59
2022-07-25 15:55:23.617 +02:00 [INF] CORS policy execution successful.
2022-07-25 15:55:23.617 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:55:23.617 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:55:30.243 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:55:31.116 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 15:55:31.307 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 15:55:31.323 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 15:55:31.487 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 15:55:31.489 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 7872.1955ms
2022-07-25 15:55:31.490 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:55:31.496 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 59 - 200 - application/json;+charset=utf-8 7879.7136ms
2022-07-25 15:55:54.999 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Account/login text/plain 62
2022-07-25 15:55:55.057 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:55:55.059 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:55:55.059 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:55:55.060 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:55:55.061 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-07-25 15:55:55.062 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 2.6079ms
2022-07-25 15:55:55.062 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:55:55.062 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Account/login text/plain 62 - 415 - application/problem+json;+charset=utf-8 63.7162ms
2022-07-25 15:56:03.162 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62
2022-07-25 15:56:03.166 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:56:03.166 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:56:03.167 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:56:03.167 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 15:56:08.577 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 15:56:08.584 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 15:56:08.596 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 15:56:08.600 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 15:56:08.600 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 15:56:08.601 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 5434.2636ms
2022-07-25 15:56:08.601 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 15:56:08.602 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62 - 200 - application/json;+charset=utf-8 5439.8766ms
2022-07-25 15:56:39.530 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49
2022-07-25 15:56:39.531 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:56:39.531 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:56:39.541 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:56:39.549 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:56:39.550 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49 - 401 - - 19.7991ms
2022-07-25 15:57:49.243 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:57:49.534 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:57:49.534 +02:00 [INF] Hosting environment: Development
2022-07-25 15:57:49.535 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 15:57:49.565 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 15:57:49.844 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 15:57:49.845 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 281.5001ms
2022-07-25 15:57:49.858 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 13.7030ms
2022-07-25 15:57:49.959 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 15:57:50.009 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 49.9730ms
2022-07-25 15:57:50.153 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 15:57:50.449 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 297.8264ms
2022-07-25 15:58:01.012 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49
2022-07-25 15:58:01.302 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 15:58:01.343 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2022-07-25 15:58:01.351 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 15:58:01.359 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 15:58:01.361 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49 - 401 - - 349.0576ms
2022-07-25 15:59:59.730 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 15:59:59.996 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 15:59:59.996 +02:00 [INF] Hosting environment: Development
2022-07-25 15:59:59.996 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 16:00:00.040 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 16:00:00.357 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 16:00:00.358 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 314.2792ms
2022-07-25 16:00:00.376 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 11.4887ms
2022-07-25 16:00:00.489 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 16:00:00.539 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 50.6204ms
2022-07-25 16:00:00.679 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 16:00:00.828 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 148.6916ms
2022-07-25 16:00:04.529 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49
2022-07-25 16:00:04.540 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 16:00:04.826 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 16:00:04.868 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 16:00:04.870 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49 - 401 - - 341.5595ms
2022-07-25 16:06:24.261 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 16:06:24.515 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 16:06:24.515 +02:00 [INF] Hosting environment: Development
2022-07-25 16:06:24.515 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 16:06:24.562 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62
2022-07-25 16:06:24.562 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 16:06:25.028 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 16:06:25.028 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 457.4051ms
2022-07-25 16:06:25.041 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 12.1282ms
2022-07-25 16:06:25.063 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 16:06:25.108 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-07-25 16:06:25.111 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:06:25.134 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 16:06:25.161 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 16:06:25.193 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 58.9006ms
2022-07-25 16:06:25.369 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 16:06:25.597 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 228.3166ms
2022-07-25 16:06:56.256 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:06:57.077 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 16:06:57.241 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 16:06:57.258 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 16:06:57.298 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 16:06:57.306 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 32139.7664ms
2022-07-25 16:06:57.307 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:06:57.313 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62 - 200 - application/json;+charset=utf-8 32756.6775ms
2022-07-25 16:07:03.847 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 16:07:04.104 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 16:07:04.105 +02:00 [INF] Hosting environment: Development
2022-07-25 16:07:04.105 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 16:07:04.149 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 16:07:04.441 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62
2022-07-25 16:07:04.611 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 16:07:04.616 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 469.1237ms
2022-07-25 16:07:04.619 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 7.9842ms
2022-07-25 16:07:04.760 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 16:07:04.821 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 60.9677ms
2022-07-25 16:07:04.885 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 16:07:04.938 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-07-25 16:07:04.945 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:07:04.985 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 16:07:04.985 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 16:07:05.172 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 186.7131ms
2022-07-25 16:07:10.266 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:07:11.123 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 16:07:11.322 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 16:07:11.339 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 16:07:11.391 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 16:07:11.399 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 6409.0837ms
2022-07-25 16:07:11.400 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:07:11.409 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62 - 200 - application/json;+charset=utf-8 6968.6637ms
2022-07-25 16:07:24.926 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62
2022-07-25 16:07:24.936 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidIssuerException: IDX10204: Unable to validate issuer. validationParameters.ValidIssuer is null or whitespace AND validationParameters.ValidIssuers is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateIssuer(String issuer, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateIssuer(String issuer, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 16:07:24.937 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10204: Unable to validate issuer. validationParameters.ValidIssuer is null or whitespace AND validationParameters.ValidIssuers is null.
2022-07-25 16:07:24.937 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:07:24.937 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 16:07:33.489 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:07:33.524 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 16:07:38.942 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 16:07:38.971 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 16:07:47.445 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 16:07:49.131 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 24193.0291ms
2022-07-25 16:07:49.131 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:07:49.131 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62 - 200 - application/json;+charset=utf-8 24205.2997ms
2022-07-25 16:08:11.696 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49
2022-07-25 16:08:11.704 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 16:08:11.709 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidIssuerException: IDX10204: Unable to validate issuer. validationParameters.ValidIssuer is null or whitespace AND validationParameters.ValidIssuers is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateIssuer(String issuer, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateIssuer(String issuer, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 16:08:11.713 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 16:08:11.715 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49 - 401 - - 18.3372ms
2022-07-25 16:09:28.099 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 16:09:28.324 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 16:09:28.325 +02:00 [INF] Hosting environment: Development
2022-07-25 16:09:28.325 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 16:09:28.353 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 16:09:28.585 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 16:09:28.586 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 234.8872ms
2022-07-25 16:09:28.602 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 12.8000ms
2022-07-25 16:09:28.685 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 16:09:28.751 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 65.2676ms
2022-07-25 16:09:28.862 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 16:09:29.031 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 168.1901ms
2022-07-25 16:09:34.453 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49
2022-07-25 16:09:34.743 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidIssuerException: IDX10204: Unable to validate issuer. validationParameters.ValidIssuer is null or whitespace AND validationParameters.ValidIssuers is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateIssuer(String issuer, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateIssuer(String issuer, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 16:09:34.794 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10204: Unable to validate issuer. validationParameters.ValidIssuer is null or whitespace AND validationParameters.ValidIssuers is null.
2022-07-25 16:09:34.798 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 16:09:34.804 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 16:09:34.808 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49 - 401 - - 354.3658ms
2022-07-25 16:11:19.267 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 16:11:19.497 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 16:11:19.498 +02:00 [INF] Hosting environment: Development
2022-07-25 16:11:19.498 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 16:11:19.521 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 16:11:19.844 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 16:11:19.845 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 327.6369ms
2022-07-25 16:11:19.867 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 18.1002ms
2022-07-25 16:11:19.963 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 16:11:20.017 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 54.0323ms
2022-07-25 16:11:20.139 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 16:11:20.288 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 148.8360ms
2022-07-25 16:11:23.389 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49
2022-07-25 16:11:23.724 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.CountriesController.PostCountry (HotelListing.API)'
2022-07-25 16:11:23.761 +02:00 [INF] Route matched with {action = "PostCountry", controller = "Countries"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HotelListing.API.Data.Country]] PostCountry(HotelListing.API.DTO.Countries.CreateCountryDto) on controller HotelListing.API.Controllers.CountriesController (HotelListing.API).
2022-07-25 16:11:27.597 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:11:28.334 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Countries] ([Name], [ShortName])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Countries]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-07-25 16:11:28.423 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelListing.API.Data.Country'.
2022-07-25 16:11:28.453 +02:00 [INF] Executed action HotelListing.API.Controllers.CountriesController.PostCountry (HotelListing.API) in 4685.6129ms
2022-07-25 16:11:28.454 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.CountriesController.PostCountry (HotelListing.API)'
2022-07-25 16:11:28.460 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49 - 201 - application/json;+charset=utf-8 5071.3679ms
2022-07-25 16:15:54.705 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 16:15:54.945 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 16:15:54.946 +02:00 [INF] Hosting environment: Development
2022-07-25 16:15:54.946 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 16:15:54.970 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 16:15:55.270 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 301.7818ms
2022-07-25 16:15:55.271 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 16:15:55.297 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 26.0634ms
2022-07-25 16:15:55.393 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 16:15:55.454 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 60.7887ms
2022-07-25 16:15:55.559 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 16:15:55.722 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 163.3594ms
2022-07-25 16:16:00.635 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62
2022-07-25 16:16:00.951 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:16:00.987 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 16:16:08.788 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:16:10.389 +02:00 [INF] Executed DbCommand (131ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 16:16:13.013 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 16:16:13.032 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 16:16:40.621 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 16:16:40.637 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 39637.4969ms
2022-07-25 16:16:40.639 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:16:40.646 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62 - 200 - application/json;+charset=utf-8 40011.2440ms
2022-07-25 16:17:22.117 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 16:17:22.367 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 16:17:22.367 +02:00 [INF] Hosting environment: Development
2022-07-25 16:17:22.367 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 16:17:22.404 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 16:17:22.652 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 16:17:22.653 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 250.7329ms
2022-07-25 16:17:22.670 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 13.8569ms
2022-07-25 16:17:22.752 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 16:17:22.814 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 61.8199ms
2022-07-25 16:17:22.925 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 16:17:23.089 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 164.6242ms
2022-07-25 16:17:27.152 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49
2022-07-25 16:17:27.457 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidIssuerException: IDX10204: Unable to validate issuer. validationParameters.ValidIssuer is null or whitespace AND validationParameters.ValidIssuers is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateIssuer(String issuer, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateIssuer(String issuer, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 16:17:27.500 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10204: Unable to validate issuer. validationParameters.ValidIssuer is null or whitespace AND validationParameters.ValidIssuers is null.
2022-07-25 16:17:27.505 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 16:17:27.510 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 16:17:27.513 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 49 - 401 - - 361.7715ms
2022-07-25 16:27:27.989 +02:00 [INF] User profile is available. Using 'C:\Users\Milos\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-07-25 16:27:28.254 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-07-25 16:27:28.254 +02:00 [INF] Hosting environment: Development
2022-07-25 16:27:28.254 +02:00 [INF] Content root path: C:\Users\Milos\source\repos\HotelListing\HotelListing.API\
2022-07-25 16:27:28.295 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/index.html - -
2022-07-25 16:27:28.608 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - -
2022-07-25 16:27:28.609 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/index.html - - - 200 - text/html;charset=utf-8 313.9716ms
2022-07-25 16:27:28.621 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 12.0094ms
2022-07-25 16:27:28.717 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/_vs/browserLink - -
2022-07-25 16:27:28.773 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 55.8588ms
2022-07-25 16:27:28.900 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - -
2022-07-25 16:27:29.103 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44367/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 203.1194ms
2022-07-25 16:28:07.389 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58
2022-07-25 16:28:07.677 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 16:28:07.683 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-07-25 16:28:07.687 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-07-25 16:28:07.695 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-07-25 16:28:07.696 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58 - 401 - - 307.4076ms
2022-07-25 16:28:14.915 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62
2022-07-25 16:28:14.920 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-07-25 16:28:14.921 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-07-25 16:28:14.927 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:28:14.963 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 16:28:25.200 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:28:26.176 +02:00 [INF] Executed DbCommand (64ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 16:28:26.417 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 16:28:26.443 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 16:28:29.597 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 16:28:29.609 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 14637.4855ms
2022-07-25 16:28:29.610 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:28:29.616 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62 - 200 - application/json;+charset=utf-8 14701.2836ms
2022-07-25 16:28:40.789 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62
2022-07-25 16:28:40.809 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:28:40.810 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 16:28:40.860 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:28:40.869 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 16:28:40.893 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 16:28:40.895 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 16:28:40.896 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 16:28:40.896 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 86.7734ms
2022-07-25 16:28:40.897 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:28:40.897 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62 - 200 - application/json;+charset=utf-8 107.6263ms
2022-07-25 16:28:56.668 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58
2022-07-25 16:28:56.670 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.CountriesController.PostCountry (HotelListing.API)'
2022-07-25 16:28:56.678 +02:00 [INF] Route matched with {action = "PostCountry", controller = "Countries"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[HotelListing.API.Data.Country]] PostCountry(HotelListing.API.DTO.Countries.CreateCountryDto) on controller HotelListing.API.Controllers.CountriesController (HotelListing.API).
2022-07-25 16:29:00.911 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:29:01.067 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Countries] ([Name], [ShortName])
VALUES (@p0, @p1);
SELECT [Id]
FROM [Countries]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-07-25 16:29:01.128 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'HotelListing.API.Data.Country'.
2022-07-25 16:29:01.152 +02:00 [INF] Executed action HotelListing.API.Controllers.CountriesController.PostCountry (HotelListing.API) in 4474.6498ms
2022-07-25 16:29:01.153 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.CountriesController.PostCountry (HotelListing.API)'
2022-07-25 16:29:01.154 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Countries application/json 58 - 201 - application/json;+charset=utf-8 4485.4959ms
2022-07-25 16:29:17.409 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:44367/api/Countries/10 application/json 58
2022-07-25 16:29:17.411 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2022-07-25 16:29:17.413 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2022-07-25 16:29:17.414 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:44367/api/Countries/10 application/json 58 - 403 - - 4.7903ms
2022-07-25 16:34:36.607 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:44367/api/Countries/10 application/json 58
2022-07-25 16:34:36.608 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2022-07-25 16:34:36.609 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2022-07-25 16:34:36.609 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:44367/api/Countries/10 application/json 58 - 403 - - 1.8039ms
2022-07-25 16:34:40.873 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62
2022-07-25 16:34:40.874 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:34:40.874 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 16:34:40.884 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:34:40.888 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 16:34:40.901 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 16:34:40.904 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 16:34:40.904 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 16:34:40.905 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 30.6492ms
2022-07-25 16:34:40.905 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:34:40.906 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:44367/api/Account/login application/json 62 - 200 - application/json;+charset=utf-8 32.0269ms
2022-07-25 16:35:32.951 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:44367/api/Countries/10 application/json 58
2022-07-25 16:35:32.951 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2022-07-25 16:35:32.951 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2022-07-25 16:35:32.953 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:44367/api/Countries/10 application/json 58 - 403 - - 1.8208ms
2022-07-25 16:39:20.630 +02:00 [INF] Request starting HTTP/2 POST https://localhost:44367/api/Account/login application/json 59
2022-07-25 16:39:20.631 +02:00 [INF] CORS policy execution successful.
2022-07-25 16:39:20.633 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:39:20.633 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(HotelListing.API.DTO.Users.LoggingDto) on controller HotelListing.API.Controllers.AccountController (HotelListing.API).
2022-07-25 16:39:20.634 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:39:20.660 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2022-07-25 16:39:20.673 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2022-07-25 16:39:20.683 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-07-25 16:39:20.684 +02:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.API.DTO.Users.AuthResponseDto'.
2022-07-25 16:39:20.685 +02:00 [INF] Executed action HotelListing.API.Controllers.AccountController.Login (HotelListing.API) in 52.5696ms
2022-07-25 16:39:20.686 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.AccountController.Login (HotelListing.API)'
2022-07-25 16:39:20.686 +02:00 [INF] Request finished HTTP/2 POST https://localhost:44367/api/Account/login application/json 59 - 200 - application/json;+charset=utf-8 56.4974ms
2022-07-25 16:40:29.752 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:44367/api/Countries/10 application/json 58
2022-07-25 16:40:29.753 +02:00 [INF] Executing endpoint 'HotelListing.API.Controllers.CountriesController.DeleteCountry (HotelListing.API)'
2022-07-25 16:40:29.756 +02:00 [INF] Route matched with {action = "DeleteCountry", controller = "Countries"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCountry(Int32) on controller HotelListing.API.Controllers.CountriesController (HotelListing.API).
2022-07-25 16:40:34.912 +02:00 [INF] Entity Framework Core 6.0.6 initialized 'HotelListingDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.6' with options: None
2022-07-25 16:40:34.933 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Name], [c].[ShortName]
FROM [Countries] AS [c]
WHERE [c].[Id] = @__p_0
2022-07-25 16:40:37.900 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Countries]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-07-25 16:40:39.884 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2022-07-25 16:40:39.885 +02:00 [INF] Executed action HotelListing.API.Controllers.CountriesController.DeleteCountry (HotelListing.API) in 10128.2421ms
2022-07-25 16:40:39.885 +02:00 [INF] Executed endpoint 'HotelListing.API.Controllers.CountriesController.DeleteCountry (HotelListing.API)'
2022-07-25 16:40:39.886 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:44367/api/Countries/10 application/json 58 - 204 - - 10133.5518ms
